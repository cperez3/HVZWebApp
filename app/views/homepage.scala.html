@main("Home","Round Title","6","17") {
<style>
    </style>

    <!-- Home Screen -->
    <section id="homeScreen">
    <div class="text-center">
      <button class="btn humanBtn">I DIED</button>
    </div>
    <div class="modAlerts">
      <h2>Mod Alerts</h2>
      <hr>
        <div id="modAlerts">
          <div class="alert main">
            <p>
              Game will be on pause until 7:00pm for grace period.
            </p>
            <span>4/27 5:47pm</span>
          </div>
          <div class="alert">
            <p>
              Mission today will restrict humans to only socks and 6-shot blasters.
            </p>
            <span>4/27 12:15pm</span>
          </div>
          <div class="alert">
            <p>
              Game will be on pause until 6:45pm for grace period.
            </p>
            <span>4/26 5:17pm</span>
          </div>
          <div class="alert">
            <p>
              Due to rain, mission will now start at 4:30pm.
            </p>
            <span>4/26 1:15pm</span>
          </div>
          <div class="alert">
            <p>
              This week's round begins at 8:00am!!! Get pumped!
            </p>
            <span>4/25 11:45pm</span>
          </div>
        </div>
    </div>
    <div id="nextMission" class="nextMission">
      <h2>Next Mission: <span>Foul Play</span></h2>
      <h3><span>Date:</span> Friday, 4/28</h3>
      <h3><span>Time:</span> 5:30pm</h3>
      <h3><span>Location:</span> Textor Hall</h3>
    </div>
        <audio id="audio" src="@routes.Assets.at("images/brainz.mp3")" ></audio>
  </section>
    <!-- Round -->
    <section id="roundScreen" style="display:none">
        <div class="sectionTitle">Round Information</div>
        <div class="screenContent">
            <span>Description:</span>
            <p>Welcome to the wonderful world of Bikini Bottom. There's a lot of fish in the sea, or at least there use to be.
            Now, it's an apocalyptic wasteland. Armored Fish (tanks) and Acid-Spitting barnacles are all that remain. Good luck
            out there. And remeber: "Just keep swimming!"</p><br>
            <span>Special Zombies</span>
            <ul>
                <li>Tank:  Can only be stunned with socks
                or missiles.</li>
                <li>Spitter:  Shoots a small blaster, which stuns humans on hit.  Stunned humans cannot move for 30 seconds, but can shoot.</li>
            </ul>
            <span>Special Humans</span>
            <ul>
                <li>Armored:  Can survive one tag, after which the armor is destroyed.</li>
            </ul><br>
            <span>Game Rules</span>
            <ol>
                <li>Don’t be dick</li>
                <li>Don’t be an idiot</li>
            </ol>
        </div>
    </section>
    <!-- Schedule -->
    <section id="scheduleScreen" style="display:none">
        <div class="sectionTitle">Schedule</div>
        <div class="schedulebox">
            <div class="scheduleContent">
                <div class="day">
                    <h3>Monday</h3>
                    <div class="events">

                        <div class="eventitem">
                            <p class="event">Event:</p>
                            <p class="eventinfo">12:00pm-3:00pm<br>
                                Academic Quad</p>
                        </div>

                        <div class="eventitem">
                            <p class="mission">Mission:</p>
                            <p class="eventinfo">5:30pm-6:30pm<br>
                                Textor</p>
                        </div>

                    </div>
                </div>

                <div class="day">
                    <h3>Tuesday</h3>

                    <div class="events">
                        <div class="eventitem">
                            <p class="event">Event:</p>
                            <p class="eventinfo">6:00pm-7:00pm<br>
                                Fitness Quad</p>
                        </div>
                    </div>
                </div>

                <div class="day">
                    <h3>Wednesday</h3>

                    <div class="events">

                        <div class="eventitem">
                            <p class="event">Event:</p>
                            <p class="eventinfo">12:00pm-1:00pm<br>
                                Academic Quad</p>
                        </div>

                        <div class="eventitem">
                            <p class="event">Event:</p>
                            <p class="eventinfo">1:00pm-2:00pm<br>
                                Smiddy Hall</p>
                        </div>

                        <div class="eventitem">
                            <p class="event">Event:</p>
                            <p class="eventinfo">2:00pm-3:00pm<br>
                                Park Quad</p>
                        </div>

                        <div class="eventitem">
                            <p class="mission">Mission:</p>
                            <p class="eventinfo">5:30pm-6:30pm<br>
                                Textor</p>
                        </div>
                    </div>
                    <img class="addScheduleBtn" onclick="" src="@routes.Assets.at("images/addEvent.png")">
                </div>

                <div class="day">
                    <h3>Thursday</h3>

                    <div class="events">

                        <div class="eventitem">
                            <p class="mission">Mission:</p>
                            <p class="eventinfo">5:00pm-6:00pm<br>
                                Tennis Courts</p>
                        </div>

                    </div>
                </div>

                <div class="day">
                    <h3>Friday</h3>

                    <div class="events">

                        <div class="eventitem">
                            <p class="mission">Mission:</p>
                            <p class="eventinfo">4:00pm-4:30pm<br>
                                Textor</p>
                        </div>
                    </div>

                </div>

                <div class="day">
                    <h3>Saturday</h3>

                    <div class="events">

                        <div class="eventitem">
                            <p class="endgame">End Game:</p>
                            <p class="eventinfo">11:00am-1:00pm<br>
                                Academic Quad</p>
                        </div>
                    </div>
                </div>

                <div class="day">
                    <h3>Sunday</h3>
                    <div class="events">
                        <div class="missionBlock nothing">
                            <p class="eventinfo">No missions today.</p>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </section>
    <!-- Map -->
    <section id="mapScreen" style="display:none">
        <div id="mapCanvas"></div>
        <div class="formSection">
          <h1>Add Marker</h1>
          <form id="markerForm">
                  <fieldset>
                      <div class="form-group">
                          <label class="col-md-4 control-label" for="markerType">Marker Type</label>
                          <div class="col-md-4">
                              <div class="input-group">
                                  <select class="form-control" name="markerType" id="markerType">
                                      <option value="zombiesighting" label="Zombie Sighting">Zombie Sighting</option>
                                      <option value="escort" label="Escort Request">Escort Request</option>
                                      <option value="chilling" label="Chilling">Just Chilling</option>
                                      <option value="other" label="Other">Other</option>
                                  </select>
                              </div>
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-md-4 control-label" for="positionStuff">Coordinates</label>
                          <div class="col-md-4">
                              <input class="form-control" id="giveCoordinates" name="positionStuff">
                          </div>
                      </div>
                      <div class="form-group">
                          <label class="col-md-4 control-label" for="additionalInformation">Additional Information</label>
                          <div class="col-md-4">
                              <textarea class="form-control" id="additionalInformation" name="additionalInformation"></textarea>
                          </div>
                      </div>
                  </fieldset>
          </form>
            <button class="markerBtn" onclick="addNewMarker()">Add New Marker</button>

        </div>
    </section>
    <!-- Chat -->
    <section id="chatScreen" style="display:none">
        <div class="sectionTitle">Chat</div>
    </section>
    <!-- Rules -->
    <section id="rulesScreen" style="display:none">
        <div class="sectionTitle">Rules</div>
    </section>
    <!-- Contact -->
    <section id="contactsScreen" style="display:none">
        <div class="sectionTitle">Contact Information</div>
        <div class="contact">
            <div class="contactInfo medical">
                <h2>Emergency / Medical</h2>
                <p class="phone">607-274-3333</p>
            </div>
            <div class="contactInfo">
                <h2>Round Coordinator</h2>
                <p class="phone">877-393-4448</p>
            </div>
            <div class="contactInfo">
                <h2>Executive Board</h2>
                <p class="phone">503-867-5309</p>
            </div>
        </div>
    </section>
    <!-- Settings -->
    <section id="settingsScreen" style="display:none"></section>

    <style>
            #mapCanvas{width:100%;height:600px;}
    </style>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>

    <script>
        $(document).ready(function () {
            $.ajax({
                type: "GET",
                url: @routes.Rounds.getRound,
                success : function(data) {
                    console.log(data);
                    round = data;

                    $.ajax({
                        type: "GET",
                        url: @routes.Users.getProfile,
                        success : function(data) {
                            console.log(data);
                            user = data;
                            $.ajax({
                                type: "GET",
                                url: @routes.Messages.getModAlerts,
                                success : function(data) {
                                    console.log(data);
                                    modAlerts = data;
                                    loadAlerts();
                                },
                                error: function(XMLHttpRequest, textStatus, errorThrown) {
                                    console.log("Mod Alerts Error");
                                    document.getElementById('no-game-message').style.borderColor = "red";
                                    document.getElementById('no-game-message').style.display= 'block';
                                }
                            });
                        },
                        error: function(XMLHttpRequest, textStatus, errorThrown) {
                            console.log("Mod Alerts Error");
                            document.getElementById('no-game-message').style.borderColor = "red";
                            document.getElementById('no-game-message').style.display= 'block';
                        }
                    });
                },
                error: function(XMLHttpRequest, textStatus, errorThrown) {
                    console.log("Join Error");
                    document.getElementById('no-game-message').style.borderColor = "red";
                    document.getElementById('no-game-message').style.display= 'block';
                },
            });


        });

        var loadAlerts = function() {
          var alertsList = "";
          for (i in modAlerts) {
            var message = modAlerts[i].message;
            var date = new Date(modAlerts[i].time * 1000);
            var month = date.getMonth();
            var day = date.getDay();
            var hour = date.getHours();
            var minute = date.getMinutes();
            var time = month + "/" + day + " " + hour + ":" + minute + "am";
            if (hour > 12) {
              hour -= 12;
              time = month + "/" + day + " " + hour + ":" + minute + "pm";
            }

            if (i > 0) {
                alertsList += "<div class='alert'><p>" + message + "</p><span>" + time + "</span></div>";
            } else {
                alertsList += "<div class='alert main'><p>" + message + "</p><span>" + time + "</span></div>";
            }
          }
          $('#modAlerts').empty()
          $('#modAlerts').append(alertsList);

          console.log(round);
          var event = round['nextEvent'];
            $('#nextMission').empty()
          if (event != null) {
              var eventDate = new Date(event.startTime * 1000);
              var eventTime = eventDate.getHours() + ":" + eventDate.getMinutes() + "am";
              if (eventDate.getHours() > 12) {
                  eventTime = eventDate.getHours() - 12 + ":" + eventDate.getMinutes() + "pm";
                  if (eventDate.getMinutes() < 10) {
                      eventTime = eventDate.getHours() - 12 + ":0" + eventDate.getMinutes() + "pm";
                  }
              }
              var location = event['humanLocation'];
              if (user['team'] === 'ZOMBIE') {
                  location = event['zombieLocation'];
              }
              var eventSection = "<h2>Next Mission: <span>" + event['title'] + "</span></h2>" +
                      "<h3><span>Date: </span>" + eventDate.getMonth() + "/" + eventDate.getDay() + "</h3>" +
                      "<h3><span>Time: </span>" + eventTime + "</h3>" +
                      "<h3><span>Location: </span>" + location + "</h3>"

              $('#nextMission').append(eventSection);
          }
        }
    </script>
    <!-- Map -->
    <script>

        // Global Map Variable
        var alreadydid = false;
        var newCoord;
        var map;
        var markers=[];
        var icons = {
            zombiesighting: {
                icon: '@routes.Assets.at("images/zombiesighting.png")'
            },
            escort: {
                icon: '@routes.Assets.at("images/escort.png")'
            },
            chilling: {
                icon: '@routes.Assets.at("images/chilling.png")'
            },
            other: {
                icon: '@routes.Assets.at("images/other.png")'
            }
        };

        /* Prevent Form Submission default */
        if (document.getElementById('markerForm').addEventListener) {
            document.getElementById('markerForm').addEventListener("submit", function(evt) {
                evt.preventDefault();
                window.history.back();
            }, true);
        }
        else {
            document.getElementById('markerForm').attachEvent('onsubmit', function(evt){
                evt.preventDefault();
                window.history.back();
            });
        }

        /* Create the map */
        function initMap() {
            if(!alreadydid) {

                //Create Style
                var styledMapType = new google.maps.StyledMapType(
                        [
                            {elementType: 'geometry', stylers: [{color: '#ebe3cd'}]},
                            {elementType: 'labels.text.fill', stylers: [{color: '#523735'}]},
                            {elementType: 'labels.text.stroke', stylers: [{color: '#f5f1e6'}]},
                            {
                                featureType: 'administrative',
                                elementType: 'geometry.stroke',
                                stylers: [{color: '#c9b2a6'}]
                            },
                            {
                                featureType: 'administrative.land_parcel',
                                elementType: 'geometry.stroke',
                                stylers: [{color: '#dcd2be'}]
                            },
                            {
                                featureType: 'administrative.land_parcel',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#ae9e90'}]
                            },
                            {
                                featureType: 'landscape.natural',
                                elementType: 'geometry',
                                stylers: [{color: '#dfd2ae'}]
                            },
                            {
                                featureType: 'poi',
                                elementType: 'geometry',
                                stylers: [{color: '#dfd2ae'}]
                            },
                            {
                                featureType: 'poi',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#93817c'}]
                            },
                            {
                                featureType: 'poi.park',
                                elementType: 'geometry.fill',
                                stylers: [{color: '#a5b076'}]
                            },
                            {
                                featureType: 'poi.park',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#447530'}]
                            },
                            {
                                featureType: 'road',
                                elementType: 'geometry',
                                stylers: [{color: '#f5f1e6'}]
                            },
                            {
                                featureType: 'road.arterial',
                                elementType: 'geometry',
                                stylers: [{color: '#fdfcf8'}]
                            },
                            {
                                featureType: 'road.highway',
                                elementType: 'geometry',
                                stylers: [{color: '#f8c967'}]
                            },
                            {
                                featureType: 'road.highway',
                                elementType: 'geometry.stroke',
                                stylers: [{color: '#e9bc62'}]
                            },
                            {
                                featureType: 'road.highway.controlled_access',
                                elementType: 'geometry',
                                stylers: [{color: '#e98d58'}]
                            },
                            {
                                featureType: 'road.highway.controlled_access',
                                elementType: 'geometry.stroke',
                                stylers: [{color: '#db8555'}]
                            },
                            {
                                featureType: 'road.local',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#806b63'}]
                            },
                            {
                                featureType: 'transit.line',
                                elementType: 'geometry',
                                stylers: [{color: '#dfd2ae'}]
                            },
                            {
                                featureType: 'transit.line',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#8f7d77'}]
                            },
                            {
                                featureType: 'transit.line',
                                elementType: 'labels.text.stroke',
                                stylers: [{color: '#ebe3cd'}]
                            },
                            {
                                featureType: 'transit.station',
                                elementType: 'geometry',
                                stylers: [{color: '#dfd2ae'}]
                            },
                            {
                                featureType: 'water',
                                elementType: 'geometry.fill',
                                stylers: [{color: '#b9d3c2'}]
                            },
                            {
                                featureType: 'water',
                                elementType: 'labels.text.fill',
                                stylers: [{color: '#92998d'}]
                            }
                        ],
                        {name: 'Styled Map'});

                var ithaca = {lat: 42.4223, lng: -76.4950};
                map = new google.maps.Map(document.getElementById('mapCanvas'), {
                    zoom: 17,
                    center: ithaca,
                    scrollwheel: false,
                    disableDoubleClickZoom: true,
                    fullScreenControl: false,
                    zoomControl: true,
                    zoomControlOptions: true,
                    mapTypeControlOptions: {
            mapTypeIds: ['roadmap', 'satellite', 'hybrid', 'terrain',
                    'styled_map']
          }
                });
                var infowindow = new google.maps.InfoWindow({
                    content: "Hello"
                });
                var marker = new google.maps.Marker({
                    position: ithaca,
                    map: map,
                    icon: icons['other'].icon,
                    title: 'Position of entire Round'
                });
                marker.addListener('click', function () {
                    infowindow.open(map, marker);
                });
                google.maps.event.addListener(map, 'click', function (e) {
                    updateCoordinates(e.latLng);
                });
                markers.push(marker);
                alreadydid = true;
                map.mapTypes.set('styled_map', styledMapType);
                map.setMapTypeId('styled_map');
            }
        }

        /* Add a new marker */
        function addNewMarker(){
            var marker = new google.maps.Marker({
                position: newCoord,
                map:map,
                icon: icons[document.getElementById('markerForm').markerType.value].icon,
                title: document.getElementById('markerType').options[document.getElementById('markerType').selectedIndex].innerHTML
            });
            var infowindow = new google.maps.InfoWindow({
                content: "<span>"+marker.title+"</span><br>"+document.getElementById('markerForm').additionalInformation.value
            });
            marker.addListener('click', function(){
                infowindow.open(map,marker);
            });
            markers.push(marker);
            google.maps.event.trigger(map, 'resize');
            document.getElementById('markerForm').positionStuff.value = "";
            document.getElementById('markerForm').additionalInformation.value = "";
        }

        /* Update form field with new position */
        function updateCoordinates(pnt){
            var lat = pnt.lat();
            lat = lat.toFixed(4);
            var lng = pnt.lng();
            lng = lng.toFixed(4);
            newCoord=pnt;
            $('input[name="positionStuff"]').val(pnt);
        }

    </script>
}